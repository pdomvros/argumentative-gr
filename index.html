<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Οδηγός Επιχειρηματολογικού Δοκιμίου</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Georgia', 'Times New Roman', Times, serif;
        }
        /* --- ACCORDION STYLES --- */
        .accordion-header {
            cursor: pointer;
            transition: background-color 0.2s;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        .accordion-header:hover {
            background-color: #fce4ec;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
            padding: 0 1rem;
        }
        .accordion-content.active {
            max-height: 2000px;
            padding: 1rem;
        }
        .rotate-icon {
            transition: transform 0.3s ease;
        }
        .rotate-icon.rotated {
            transform: rotate(180deg);
        }

        /* --- PRINT STYLES --- */
        @media print {
            body {
                background-color: #fff !important;
                margin: 0;
                padding: 0;
            }

            /* κρύβουμε ό,τι έχει no-print */
            .no-print {
                display: none !important;
            }

            .essay-builder {
                box-shadow: none !important;
                border: none !important;
                max-width: 100% !important;
                padding: 10mm 15mm !important;
            }

            /* να μη φαίνονται γραμμές / πλαίσια */
            #essay-builder .border-t {
                border-top: none !important;
            }
            #result-container {
                display: block !important;
                margin-top: 0 !important;
                padding: 0 !important;
            }
            #result-container > div {
                border: none !important;
                box-shadow: none !important;
                background: #fff !important;
                padding: 0 !important;
            }

            /* μπλοκ στοιχείων μαθητή */
            .student-info-print {
                display: flex !important;
                flex-wrap: wrap;
                justify-content: space-between;
                margin-bottom: 10mm !important;
                gap: 5mm;
            }
            .student-info-print .info-group {
                flex-basis: 30%;
                display: flex;
                align-items: center;
                gap: 5px;
            }
            .student-info-print label {
                font-weight: bold;
            }
            .student-info-print input {
                border: none !important;
                border-bottom: 1px solid #000 !important;
                padding: 0 2px;
                font-size: 11pt;
                flex-grow: 1;
                min-width: 80px;
                background-color: transparent !important;
            }

            /* μόνο το κείμενο του δοκιμίου */
            #final-essay-text {
                white-space: pre-wrap;
                font-size: 12pt;
                line-height: 1.5;
                margin-top: 0 !important;
                border: none !important;
                background-color: #fff !important;
                color: #000 !important;
                text-align: justify;
            }
        }
    </style>
</head>
<body class="bg-stone-100 text-gray-800 p-4 md:p-8">

    <!-- Header με λογότυπο + τίτλο (ΔΕΝ εκτυπώνεται) -->
    <div class="max-w-4xl mx-auto mb-8 no-print">
        <div class="flex flex-row items-center justify-center gap-4 md:gap-6 mb-4 flex-nowrap">
            <img src="greek logo.png" alt="Λογότυπο" class="h-10 md:h-12 w-auto">
            <h1 class="text-2xl md:text-4xl font-bold text-red-800 text-center whitespace-nowrap">
                Οδηγός Σύνθεσης Επιχειρηματολογικού Δοκιμίου ✍️
            </h1>
        </div>
        <p class="text-lg text-gray-600 text-center">
            Χτίσε το κείμενό σου βήμα προς βήμα, ακολουθώντας τη δομή του επιχειρηματολογικού λόγου.
        </p>
    </div>

    <div id="essay-builder" class="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl p-6 md:p-10 mb-8 essay-builder">
        
        <!-- ΣΤΟΙΧΕΙΑ ΜΑΘΗΤΗ (φαίνονται στην εκτύπωση) -->
        <div class="student-info-print mb-6 flex flex-wrap justify-between gap-x-8 gap-y-3">
            <div class="info-group flex items-center gap-2">
                <label for="studentName" class="font-bold">Όνομα:</label>
                <input type="text" id="studentName" placeholder="Πληκτρολογήστε το όνομά σας" class="p-1 border border-gray-300 rounded-md flex-grow min-w-40">
            </div>
            <div class="info-group flex items-center gap-2">
                <label for="className" class="font-bold">Τάξη:</label>
                <input type="text" id="className" placeholder="π.χ. Γ' Λυκείου" class="p-1 border border-gray-300 rounded-md flex-grow min-w-20">
            </div>
            <div class="info-group flex items-center gap-2">
                <label for="currentDate" class="font-bold">Ημερομηνία:</label>
                <input type="date" id="currentDate" class="p-1 border border-gray-300 rounded-md flex-grow min-w-32">
            </div>
        </div>
        
        <!-- ΘΕΜΑ (ΜΟΝΟ για οθόνη) -->
        <div class="mb-6 no-print">
            <label for="studentTopic" class="block text-xl font-semibold text-gray-800 mb-2">Θέμα του Δοκιμίου</label>
            <p class="text-sm text-gray-500 mb-3 text-justify">
                Μπορείς να επιλέξεις ένα θέμα από τη λίστα ή να γράψεις έναν δικό σου τίτλο πιο κάτω. 
                Η εκτύπωση λειτουργεί κανονικά ακόμη και χωρίς τίτλο.
            </p>
            <select id="studentTopic" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors bg-white">
                <option value="" selected disabled>-- Παρακαλώ, επίλεξε ένα θέμα (προαιρετικά) --</option>
                <option value="Η επίδραση της Τεχνητής Νοημοσύνης στη σχολική εκπαίδευση">Η επίδραση της Τεχνητής Νοημοσύνης στη σχολική εκπαίδευση</option>
                <option value="Πρέπει να θεσπιστούν όρια στη χρήση των social media από ανηλίκους">Πρέπει να θεσπιστούν όρια στη χρήση των social media από ανηλίκους;</option>
                <option value="Η αξία της προσωπικής επαφής έναντι της ηλεκτρονικής επικοινωνίας">Η αξία της προσωπικής επαφής έναντι της ηλεκτρονικής επικοινωνίας</option>
                <option value="Η κλιματική αλλαγή ως ηθική πρόκληση για τη νέα γενιά">Η κλιματική αλλαγή ως ηθική πρόκληση για τη νέα γενιά</option>
                <option value="Ποιος είναι ο ρόλος της τέχνης και του πολιτισμού στην ανάπτυξη ενός έθνους">Ποιος είναι ο ρόλος της τέχνης και του πολιτισμού στην ανάπτυξη ενός έθνους;</option>
                <option value="Η αναγκαιότητα της δια βίου μάθησης στον 21ο αιώνα">Η αναγκαιότητα της δια βίου μάθησης στον 21ο αιώνα</option>
                <option value="Πώς η υπερκατανάλωση τροφίμων επηρεάζει το περιβάλλον">Πώς η υπερκατανάλωση τροφίμων επηρεάζει το περιβάλλον</option>
                <option value="Η σημασία της κριτικής σκέψης στην εποχή της παραπληροφόρησης">Η σημασία της κριτικής σκέψης στην εποχή της παραπληροφόρησης</option>
                <option value="Είναι εφικτή μια κοινωνία χωρίς πλαστικό">Είναι εφικτή μια κοινωνία χωρίς πλαστικό;</option>
                <option value="Ο ρόλος του αθλητισμού στη διαμόρφωση του χαρακτήρα">Ο ρόλος του αθλητισμού στη διαμόρφωση του χαρακτήρα</option>
                <option value="Πρέπει να διδάσκεται η οικονομική παιδεία από νωρίς στα σχολεία">Πρέπει να διδάσκεται η οικονομική παιδεία από νωρίς στα σχολεία;</option>
                <option value="Η παγκοσμιοποίηση: ευκαιρία ή απειλή για τις τοπικές κουλτούρες">Η παγκοσμιοποίηση: ευκαιρία ή απειλή για τις τοπικές κουλτούρες;</option>
                <option value="Η βία στα γήπεδα: αίτια και τρόποι αντιμετώπισης">Η βία στα γήπεδα: αίτια και τρόποι αντιμετώπισης</option>
            </select>

            <div class="mt-4">
                <label for="customTopic" class="block text-sm font-semibold text-gray-800 mb-1">
                    Ή γράψε τον δικό σου τίτλο
                </label>
                <input 
                    type="text" 
                    id="customTopic" 
                    class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors"
                    placeholder="Πληκτρολόγησε εδώ τον δικό σου τίτλο δοκιμίου">
                <p class="text-xs text-gray-500 mt-1">
                    Αν συμπληρώσεις δικό σου τίτλο, αυτός θα εμφανιστεί στην προεπισκόπηση (αλλά όχι στην εκτύπωση).
                </p>
            </div>
        </div>
        
        <!-- ΕΠΙΠΕΔΟ (ΜΟΝΟ για οθόνη) -->
        <div class="mb-8 no-print">
            <label for="essayLevel" class="block text-xl font-semibold text-gray-800 mb-2">Επίπεδο Ανάλυσης</label>
            <p class="text-sm text-gray-500 mb-3 text-justify">Το επίπεδο καθορίζει την πολυπλοκότητα των οδηγιών.</p>
            <select id="essayLevel" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors bg-white">
                <option value="gymnasium" selected>Γ' Γυμνασίου (Απλή Δομή)</option>
                <option value="lyceum">Λύκειο (Σύνθετη Δομή / Μοντέλο Toulmin)</option>
            </select>
        </div>

        <!-- ΚΥΡΙΟ ΜΕΡΟΣ (ΜΟΝΟ για οθόνη) -->
        <div class="space-y-4 no-print" id="accordion-container">
            
            <div class="border border-red-300 rounded-lg shadow-md bg-pink-50">
                <div class="accordion-header flex justify-between items-center bg-red-100" data-target="intro-content">
                    <h3 class="text-xl font-bold text-red-800">1. Εισαγωγή (Πρόλογος)</h3>
                    <div class="flex items-center gap-2">
                        <button class="help-btn bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm hover:bg-blue-200 transition-colors no-print" data-section="intro">
                            💡 Βοήθεια
                        </button>
                        <svg class="w-6 h-6 text-red-800 rotate-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div class="accordion-content" id="intro-content">
                    <p id="introParagraphGuidance" class="text-sm text-gray-600 mb-3 italic text-justify"></p>
                    <textarea id="introParagraph" rows="3" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm" placeholder="Ξεκίνα με την αφορμή (αναφορά στο γενικό θέμα) και κατέληξε στη διατύπωση του Ισχυρισμού/Θέσης σου."></textarea>
                </div>
            </div>

            <div class="border border-green-500 rounded-lg shadow-md bg-green-50">
                <div class="accordion-header flex justify-between items-center bg-green-100" data-target="position-content">
                    <h3 class="text-xl font-bold text-green-800">2. Κύριο Μέρος: Επιχειρήματα (Θέση)</h3>
                    <div class="flex items-center gap-2">
                        <button class="help-btn bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm hover:bg-blue-200 transition-colors no-print" data-section="position">
                            💡 Βοήθεια
                        </button>
                        <svg class="w-6 h-6 text-green-800 rotate-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div class="accordion-content" id="position-content">
                    <p id="positionParagraphGuidance" class="text-sm text-gray-600 mb-3 italic text-justify"></p>
                    <div id="position-paragraphs-container" class="space-y-4">
                        <div class="position-paragraph-group">
                            <label class="block text-md font-semibold text-gray-700 mb-1">Παράγραφος 1 (Θέση/Επιχείρημα)</label>
                            <textarea class="position-paragraph w-full p-3 border border-gray-300 rounded-lg shadow-sm" rows="5" placeholder="Θεματική πρόταση: Πρώτο Επιχείρημα. Ανάπτυξη: Τεκμηρίωση (παραδείγματα, στοιχεία)."></textarea>
                        </div>
                    </div>
                    <button id="addPositionParagraph" class="mt-4 bg-green-600 text-white px-4 py-2 rounded-md font-medium hover:bg-green-700 transition-colors no-print">
                        + Προσθήκη Επιπλέον Παραγράφου Θέσης
                    </button>
                </div>
            </div>

            <div class="border border-yellow-500 rounded-lg shadow-md bg-yellow-50">
                <div class="accordion-header flex justify-between items-center bg-yellow-100" data-target="counter-content">
                    <h3 class="text-xl font-bold text-yellow-800">3. Κύριο Μέρος: Αντίλογος (Αντεπιχειρήματα)</h3>
                    <div class="flex items-center gap-2">
                        <button class="help-btn bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm hover:bg-blue-200 transition-colors no-print" data-section="counter">
                            💡 Βοήθεια
                        </button>
                        <svg class="w-6 h-6 text-yellow-800 rotate-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div class="accordion-content" id="counter-content">
                    <p id="counterParagraphGuidance" class="text-sm text-gray-600 mb-3 italic text-justify"></p>
                    <div id="counter-paragraphs-container" class="space-y-4">
                        <div class="counter-paragraph-group">
                            <label class="block text-md font-semibold text-gray-700 mb-1">Παράγραφος 1 (Αντίλογος/Ανασκευή)</label>
                            <textarea class="counter-paragraph w-full p-3 border border-gray-300 rounded-lg shadow-sm" rows="5" placeholder="Παρουσίασε την αντίθετη άποψη. Εάν είσαι σε επίπεδο Λυκείου, φρόντισε να την ανασκευάσεις (να την αντικρούσεις)."></textarea>
                        </div>
                    </div>
                    <button id="addCounterParagraph" class="mt-4 bg-yellow-600 text-white px-4 py-2 rounded-md font-medium hover:bg-yellow-700 transition-colors no-print">
                        + Προσθήκη Επιπλέον Παραγράφου Αντίλογου
                    </button>
                </div>
            </div>

            <div class="border border-blue-500 rounded-lg shadow-md bg-blue-50">
                <div class="accordion-header flex justify-between items-center bg-blue-100" data-target="conclusion-content">
                    <h3 class="text-xl font-bold text-blue-800">4. Επίλογος (Συμπέρασμα)</h3>
                    <div class="flex items-center gap-2">
                        <button class="help-btn bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm hover:bg-blue-200 transition-colors no-print" data-section="conclusion">
                            💡 Βοήθεια
                        </button>
                        <svg class="w-6 h-6 text-blue-800 rotate-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div class="accordion-content" id="conclusion-content">
                    <p id="conclusionParagraphGuidance" class="text-sm text-gray-600 mb-3 italic text-justify"></p>
                    <textarea id="conclusionParagraph" rows="3" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm" placeholder="Συνόψισε τα βασικά επιχειρήματα. Διατύπωσε το τελικό συμπέρασμα και πιθανή πρόταση δράσης."></textarea>
                </div>
            </div>

        </div>

        <!-- Κουμπί σύνθεσης + ΑΠΟΤΕΛΕΣΜΑ (στην εκτύπωση κρατάμε μόνο το κείμενο) -->
        <div class="mt-8 pt-6 border-t border-gray-200">
            <div class="text-center no-print">
                <button id="assembleEssayButton" class="bg-red-700 text-white px-8 py-3 rounded-lg font-medium text-lg shadow-md hover:bg-red-800 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                    Σύνθεση Τελικού Δοκιμίου
                </button>
            </div>

            <div id="result-container" class="mt-6 hidden">
                <div class="bg-stone-50 border border-stone-200 rounded-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4 no-print">Το Ολοκληρωμένο Δοκίμιο</h3>
                    <h4 id="essay-topic-print" class="hidden text-center no-print"></h4>
                    <p id="final-essay-text" class="text-base text-gray-700 leading-relaxed whitespace-pre-wrap text-justify"></p>
                    
                    <div class="flex flex-col sm:flex-row gap-3 mt-6 no-print">
                        <button id="copyButton" class="w-full sm:w-auto bg-amber-600 text-white px-5 py-2 rounded-md font-medium hover:bg-amber-700 transition-colors">
                            Αντιγραφή στο Πρόχειρο
                        </button>
                        <button id="resetButton" class="w-full sm:w-auto bg-stone-400 text-stone-800 px-5 py-2 rounded-md font-medium hover:bg-stone-500">
                            Ξεκίνα από την Αρχή
                        </button>
                        <button id="printButton" class="w-full sm:w-auto bg-stone-700 text-white px-5 py-2 rounded-md font-medium hover:bg-stone-800">
                            Εκτύπωση / Αποθήκευση ως PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Suggestions Modal (ΜΟΝΟ για οθόνη) -->
    <div id="suggestions-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 no-print hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold text-red-800" id="suggestions-title">Προτάσεις</h3>
                <button id="modal-close-suggestions" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            <div id="suggestions-content" class="space-y-4">
                <!-- Suggestions will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Feedback Modal (ΜΟΝΟ για οθόνη) -->
    <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 no-print hidden">
        <!-- Feedback modal content will be inserted here -->
    </div>

    <footer class="w-full mx-auto mt-10 text-center text-gray-500 text-sm no-print">
        <p class="whitespace-nowrap">✨✍️ Δημιουργία: Παναγιώτης Δόμβρος, Εκπαιδευτικός Αγγλικών-Θεατρολόγος, Με την Επιφύλαξη Παντός Δικαιώματος ✍️✨</p>
    </footer>

    <script>
        // --- GUIDANCE TEXTS ---
        const guideContent = [
            { 
                title: "1. Εισαγωγή (Πρόλογος)", 
                content: {
                    gym: `
                        <p><strong>Στόχος:</strong> Αναφορά στο γενικό θέμα (Αφορμή) + Σαφής διατύπωση της θέσης/άποψης (<strong>Ισχυρισμός</strong>).</p>
                        <h4>Γλωσσικές Επιλογές (Έναρξη)</h4>
                        <ul>
                            <li>Το ζήτημα της/του... είναι ιδιαίτερα σημαντικό στη σύγχρονη κοινωνία.</li>
                            <li>Στις μέρες μας, τίθεται συχνά το ερώτημα: Πρέπει άραγε...;</li>
                            <li>Είναι κοινώς αποδεκτό ότι... / Η δική μου θέση είναι ότι...</li>
                        </ul>
                    `,
                    lyc: `
                        <p><strong>Στόχος:</strong> Ξεκίνημα με ευρύτερη αναφορά στο θέμα (κοινωνικό/πολιτισμικό πλαίσιο). Διατύπωση σαφούς <strong>Ισχυρισμού</strong> (Thesis) με χρήση <strong>Επιστημικής Τροπικότητας</strong> (π.χ. <em>είναι αναμφισβήτητο ότι</em>).</p>
                        <h4>Γλωσσικές Επιλογές (Τρόποι Έκφρασης)</h4>
                        <ul>
                            <li><strong>Βεβαιότητα (Επιστημική Τροπικότητα):</strong> Είναι αναμφισβήτητο ότι..., Το σίγουρο είναι πως..., Η πραγματικότητα δείχνει ότι...</li>
                            <li><strong>Ρητορικό Ερώτημα:</strong> Μπορούμε, άραγε, να αγνοήσουμε τις επιπτώσεις της/του...;</li>
                        </ul>
                    `
                }
            },
            { 
                title: "2. Κύριο Μέρος (Ανάπτυξη)", 
                content: {
                    gym: `
                        <p>Κάθε παράγραφος αναπτύσσει ΜΟΝΟ ένα επιχείρημα/μια βασική ιδέα.</p>
                        <h4>Δομή Παραγράφου (Θεματική πρόταση + Ανάπτυξη)</h4>
                        <ul>
                            <li><strong>Θεματική Πρόταση:</strong> Εκφράζει το επιχείρημα (π.χ. «Ένα βασικό όφελος είναι...»).</li>
                            <li><strong>Ανάπτυξη:</strong> Στηρίζω το επιχείρημα με <strong>Τεκμήρια</strong> (παραδείγματα, εμπειρικές αλήθειες, στατιστικά στοιχεία).</li>
                            <li><strong>Προτάσεις Σύνδεσης:</strong> Χρησιμοποιώ <strong>Διαρθρωτικές Λέξεις</strong> (π.χ. επιπλέον, επίσης, καθώς, συνεπώς) για συνοχή.</li>
                        </ul>
                        <h4>Γλωσσικές Επιλογές (Ανάπτυξη & Τεκμηρίωση)</h4>
                        <ul>
                            <li>Ένα από τα βασικότερα επιχειρήματα υπέρ... είναι ότι...</li>
                            <li>Αρχικά, θα μπορούσαμε να αναφέρουμε πως...</li>
                            <li>Σύμφωνα με έρευνες/στατιστικά, ...</li>
                        </ul>
                    `,
                    lyc: `
                        <p>Η ανάπτυξη πρέπει να είναι λογική και <strong>συνεκτική</strong>, με πλούτο σημασιολογικών και γραμματικοσυντακτικών στοιχείων. Κάθε παράγραφος πρέπει να ακολουθεί τη δομή του <strong>Μοντέλου Toulmin</strong> (Ισχυρισμός, Δεδομένα/Τεκμήρια, Εγγύηση).</p>
                        <h4>Σύνθετη Δομή Παραγράφου</h4>
                        <ul>
                            <li><strong>Δεδομένα/Τεκμήρια (Data/Grounds):</strong> Στηρίζω τον ισχυρισμό με <strong>έγκυρες πηγές</strong>: Πορίσματα ερευνών, Στατιστικά, <strong>Αυθεντίες</strong> (π.χ. επιστήμονες, οργανισμοί), Ιστορικά Γεγονότα.</li>
                            <li><strong>Εγγύηση (Warrant):</strong> Η λογική σύνδεση του επιχειρήματος με τα δεδομένα.</li>
                        </ul>
                        <h4>Γλωσσικές Στρατηγικές</h4>
                        <ul>
                            <li><strong>Εναλλαγή Σύνταξης:</strong> Χρησιμοποιώ τόσο <strong>ενεργητική</strong> (<em>Η κοινωνία οφείλει</em>) όσο και <strong>παθητική</strong> σύνταξη (<em>Η δράση πρέπει να αναληφθεί</em>).</li>
                            <li><strong>Ονοματοποίηση:</strong> (<strong>Η έλλειψη διαλόγου</strong> αντί <em>Όταν δεν υπάρχει διάλογος</em>).</li>
                        </ul>
                    `
                }
            },
            { 
                title: "3. Αντίλογος (Αντεπιχειρήματα)", 
                content: {
                    gym: `
                        <p><strong>Στόχος:</strong> Εισαγωγή ενός αντεπιχειρήματος (προαιρετικά) και απλή ανασκευή του, εξηγώντας γιατί η δική σου θέση είναι ισχυρότερη.</p>
                        <h4>Γλωσσικές Επιλογές (Αντίλογος & Ανασκευή)</h4>
                        <ul>
                            <li>Ορισμένοι υποστηρίζουν ότι... Ωστόσο, αυτό δεν ισχύει γιατί...</li>
                            <li>Αν και κάποιοι θεωρούν πως..., στην πραγματικότητα...</li>
                        </ul>
                    `,
                    lyc: `
                        <p><strong>Στόχος:</strong> Παρουσίαση του αντίλογου (Σχήμα άρσης και θέσης) και <strong>πλήρης ανασκευή</strong> του με ισχυρά επιχειρήματα (Rebuttal). Φρόντισε η ανασκευή να ενισχύει τη δική σου θέση.</p>
                        <h4>Γλωσσικές Επιλογές</h4>
                        <ul>
                            <li>Είναι γεγονός ότι κάποιοι εκφράζουν την ένσταση πως... Ωστόσο, η επιχειρηματολογία αυτή καταρρίπτεται αν λάβουμε υπόψη...</li>
                            <li>Αν και η αντίθετη άποψη φαίνεται να έχει βάση σε ορισμένα σημεία, εντούτοις παραβλέπει την ουσία του ζητήματος, η οποία είναι...</li>
                        </ul>
                    `
                }
            },
            { 
                title: "4. Επίλογος (Συμπέρασμα)", 
                content: {
                    gym: `
                        <p><strong>Στόχος:</strong> Σύντομη <strong>ανακεφαλαίωση</strong> των κύριων επιχειρημάτων. Τελικό <strong>συμπέρασμα</strong> ή απλή πρόταση/ευχή για δράση. Μην εισάγεις νέες ιδέες.</p>
                        <h4>Γλωσσικές Επιλογές (Τελική Σύνδεση)</h4>
                        <ul>
                            <li>Συμπερασματικά, μπορούμε να πούμε ότι...</li>
                            <li>Από τα παραπάνω προκύπτει πως...</li>
                            <li>Εν κατακλείδι, είναι φανερό ότι... και για αυτό θα πρέπει όλοι να...</li>
                        </ul>
                    `,
                    lyc: `
                        <p><strong>Στόχος:</strong> Ολοκληρωμένη <strong>ανακεφαλαίωση</strong> των κύριων σημείων. Διατύπωση <strong>τελικού συμπεράσματος</strong>. Χρήση <strong>Δεοντικής Τροπικότητας</strong> (π.χ. <em>είναι επιτακτική η ανάγκη</em>) για την πρόταση δράσης/παραίνεση, με ευρύτερη προοπτική.</p>
                        <h4>Γλωσσικές Επιλογές</h4>
                        <ul>
                            <li><strong>Δεοντικής Τροπικότητας:</strong> Επομένως, είναι επιτακτική η ανάγκη..., Οφείλουμε να..., Είναι καθήκον της Πολιτείας να...</li>
                            <li><strong>Συμπέρασμα:</strong> Έπειτα από την ανάλυση αυτή, καθίσταται σαφές ότι...</li>
                        </ul>
                    `
                }
            }
        ];

        // --- TOPIC SUGGESTIONS FOR ALL TOPICS ---
        const topicSuggestions = {
            "Η επίδραση της Τεχνητής Νοημοσύνης στη σχολική εκπαίδευση": {
                intro: [
                    "Μιλήστε για την ταχεία εξέλιξη της ΤΝ και τη διείσδυσή της σε διάφορους τομείς",
                    "Αναφερθείτε στη σημασία της προσαρμογής του εκπαιδευτικού συστήματος στις νέες τεχνολογίες",
                    "Μπορείτε να ξεκινήσετε με ένα ρητορικό ερώτημα: Μπορεί η ΤΝ να αλλάξει ριζικά τον τρόπο μάθησης;"
                ],
                position: [
                    "Προσαρμοσμένη μάθηση: Η ΤΝ μπορεί να προσαρμόζει το εκπαιδευτικό υλικό ανάλογα με τις ανάγκες κάθε μαθητή",
                    "Αυτοματοποίηση διοικητικών εργασιών: Ελευθερώνει χρόνο για τους εκπαιδευτικούς να ασχοληθούν περισσότερο με τη διδασκαλία",
                    "Πρόσβαση σε ποιοτικό εκπαιδευτικό υλικό: Μαθητές από απομακρυσμένες περιοχές μπορούν να έχουν πρόσβαση σε υλικό υψηλής ποιότητας"
                ],
                counter: [
                    "Απώλεια ανθρώπινης επαφής: Η υπερβολική χρήση τεχνολογίας μπορεί να μειώσει την κοινωνική αλληλεπίδραση",
                    "Εξάρτηση από τεχνολογία: Οι μαθητές μπορεί να εξαρτηθούν από την ΤΝ και να μην αναπτύσσουν κριτική σκέψη",
                    "Ανισότητες: Σχολεία με λιγότερους πόρους μπορεί να μην έχουν πρόσβαση σε προηγμένες τεχνολογίες ΤΝ"
                ],
                conclusion: [
                    "Η ΤΝ μπορεί να είναι ένας πολύτιμος βοηθός στην εκπαίδευση, αλλά όχι πανάκεια",
                    "Χρειάζεται προσεκτικός σχεδιασμός και ηθικά πλαίσια για την ενσωμάτωσή της",
                    "Ο ρόλος του δασκάλου παραμένει απαραίτητος ακόμα και στην εποχή της ΤΝ"
                ]
            },
            "Πρέπει να θεσπιστούν όρια στη χρήση των social media από ανηλίκους": {
                intro: [
                    "Αναφερθείτε στη διείσδυση των social media στη ζωή των νέων",
                    "Παρουσιάστε στατιστικά στοιχεία για το χρόνο που περνούν οι έφηβοι στα social media",
                    "Μπορείτε να ξεκινήσετε με μια προσωπική εμπειρία ή παρατήρηση"
                ],
                position: [
                    "Ψυχική υγεία: Η υπερβολική χρήση συνδέεται με άγχος, κατάθλιψη και χαμηλή αυτοεκτίμηση",
                    "Ασφάλεια: Οι ανηλίκοι είναι ευάλωτοι σε διαδικτυακό εκφοβισμό και παράνομη περιεχόμενο",
                    "Ακαδημαϊκή απόδοση: Η υπερβολική χρήση επηρεάζει αρνητικά τη συγκέντρωση και τις σχολικές επιδόσεις"
                ],
                counter: [
                    "Κοινωνικοποίηση: Τα social media βοηθούν τους νέους να διατηρούν επαφές και να αναπτύσσουν κοινωνικές δεξιότητες",
                    "Πρόσβαση σε πληροφορίες: Μπορούν να είναι πηγές γνώσης και ενημέρωσης",
                    "Εκφραστική δυνατότητα: Δίνουν φωνή στους νέους και βοηθούν στη δημιουργία ταυτότητας"
                ],
                conclusion: [
                    "Το κλειδί είναι η ισορροπία και η επίβλεψη",
                    "Χρειάζονται όχι απαγορεύσεις αλλά εκπαίδευση για την υπεύθυνη χρήση",
                    "Οι γονείς και το σχολείο πρέπει να συνεργάζονται για τη δημιουργία υγιών ψηφιακών συνθηκών"
                ]
            },
            "Η αξία της προσωπικής επαφής έναντι της ηλεκτρονικής επικοινωνίας": {
                intro: [
                    "Συζητήστε την αύξηση της ψηφιακής επικοινωνίας στη σύγχρονη εποχή",
                    "Αναφερθείτε στην αλλαγή των κοινωνικών συνηθειών μετά την πανδημία",
                    "Μπορείτε να ξεκινήσετε με μια σύγκριση μεταξύ παρουσίασης και online συνομιλίας"
                ],
                position: [
                    "Βαθύτερες σχέσεις: Η προσωπική επαφή δημιουργεί ισχυρότερους συναισθηματικούς δεσμούς",
                    "Μη-λεκτική επικοινωνία: Σωματική γλώσσα, εκφράσεις προσώπου και φωνήτες προσδίδουν πλούτο στην επικοινωνία",
                    "Άμεση ανταπόκριση: Η δια ζώσης επικοινωνία επιτρέπει άμεσες αποκρίσεις και αποφάσεις"
                ],
                counter: [
                    "Ευκολία και ταχύτητα: Η ηλεκτρονική επικοινωνία είναι γρηγορότερη και πιο προσβάσιμη",
                    "Καθυστερημένη απάντηση: Δίνει χρόνο για σκέψη και καλύτερη διατύπωση",
                    "Παγκόσμια επικοινωνία: Επιτρέπει επαφές πέρα από γεωγραφικά όρια"
                ],
                conclusion: [
                    "Η ιδανική λύση είναι ο συνδυασμός και των δύο μορφών επικοινωνίας",
                    "Η προσωπική επαφή παραμένει απαραίτητη για βαθιές ανθρώπινες σχέσεις",
                    "Η ψηφιακή επικοινωνία πρέπει να συμπληρώνει, όχι να αντικαθιστά τη δια ζώσης επικοινωνία"
                ]
            },
            "Η κλιματική αλλαγή ως ηθική πρόκληση για τη νέα γενιά": {
                intro: [
                    "Παρουσιάστε τα επιστημονικά στοιχεία για την κλιματική αλλαγή",
                    "Αναφερθείτε στις επιπτώσεις που βιώνουμε ήδη",
                    "Μιλήστε για την ευθύνη των νέων να αντιμετωπίσουν αυτό το πρόβλημα"
                ],
                position: [
                    "Ηθική ευθύνη: Η τωρινή γενιά έχει το ηθικό καθήκον να προστατεύσει τον πλανήτη για τις μελλοντικές γενιές",
                    "Κοινωνική δικαιοσύνη: Οι φτωχότερες χώρες, που συνέβαλαν λιγότερο στην αλλαγή του κλίματος, υφίστανται τις χειρότερες επιπτώσεις",
                    "Οικονομικές ευκαιρίες: Η μετάβαση σε πράσινη οικονομία μπορεί να δημιουργήσει νέες θέσεις εργασίας"
                ],
                counter: [
                    "Οικονομικό κόστος: Η αντιμετώπιση της κλιματικής αλλαγής απαιτεί τεράστιες οικονομικές επενδύσεις",
                    "Αναπτυξιακές ανάγκες: Οι αναπτυσσόμενες χώρες χρειάζονται ενέργεια για την οικονομική τους ανάπτυξη",
                    "Αβεβαιότητα: Υπάρχουν ακόμα επιστημονικές αβεβαιότητες σχετικά με το έκταση και τις λύσεις"
                ],
                conclusion: [
                    "Η κλιματική αλλαγή είναι το σημαντικότερο ηθικό ζήτημα της εποχής μας",
                    "Απαιτεί συλλογική δράση και πολιτική βούληση",
                    "Οι νέοι έχουν το δικαίωμα και το καθήκον να απαιτήσουν δράση"
                ]
            },
            "Ποιος είναι ο ρόλος της τέχνης και του πολιτισμού στην ανάπτυξη ενός έθνους": {
                intro: [
                    "Ορίστε τι εννοείτε με τέχνη και πολιτισμό",
                    "Αναφερθείτε στην ιστορική σημασία του πολιτισμού για τα έθνη",
                    "Μπορείτε να ξεκινήσετε με γνωστές πολιτιστικές προσωπικότητες ή έργα"
                ],
                position: [
                    "Ταυτότητα και ενότητα: Η τέχνη και ο πολιτισμός δημιουργούν εθνική συνείδηση και ενότητα",
                    "Οικονομική ανάπτυξη: Ο πολιτιστικός τουρισμός και οι δημιουργικές βιομηχανίες συμβάλλουν στην οικονομία",
                    "Κριτική σκέψη: Η τέχνη προάγει την κριτική σκέψη και την καινοτομία"
                ],
                counter: [
                    "Προτεραιότητες: Ορισμένοι υποστηρίζουν ότι η οικονομική ανάπτυξη είναι πιο σημαντική από τον πολιτισμό",
                    "Κόστος: Η χρηματοδότηση της τέχνης και του πολιτισμού μπορεί να είναι δαπανηρή",
                    "Υποκειμενικότητα: Η αξία της τέχνης είναι υποκειμενική και δύσκολα μετράται"
                ],
                conclusion: [
                    "Ο πολιτισμός είναι το πνεύμα ενός έθνους",
                    "Η επένδυση στον πολιτισμό είναι επένδυση στο μέλλον",
                    "Η τέχνη και ο πολιτισμός είναι απαραίτητοι για την πλήρη ανάπτυξη μιας κοινωνίας"
                ]
            },
            "Η αναγκαιότητα της δια βίου μάθησης στον 21ο αιώνα": {
                intro: [
                    "Περιγράψτε την ταχεία τεχνολογική και κοινωνική αλλαγή",
                    "Αναφερθείτε στην αλλαγή της αγοράς εργασίας",
                    "Μπορείτε να ξεκινήσετε με στατιστικά για τα νέα επαγγέλματα που δημιουργούνται"
                ],
                position: [
                    "Τεχνολογική εξέλιξη: Οι ταχείες τεχνολογικές αλλαγές απαιτούν συνεχή εκπαίδευση",
                    "Επαγγελματική προσαρμοστικότητα: Η δια βίου μάθηση επιτρέπει στους εργαζόμενους να προσαρμόζονται σε νέους ρόλους",
                    "Προσωπική ανάπτυξη: Η μάθηση σε όλη τη ζωή προάγει την προσωπική ολοκλήρωση και ευημερία"
                ],
                counter: [
                    "Χρόνος και κόστος: Η συνεχιζόμενη μάθηση απαιτεί χρόνο και οικονομικούς πόρους",
                    "Κοινωνικές ανισότητες: Όχι όλοι έχουν ίση πρόσβαση σε ευκαιρίες μάθησης",
                    "Επαγγελματική εξειδίκευση: Ορισμένοι προτιμούν την εμβάθυνση σε ένα συγκεκριμένο πεδίο"
                ],
                conclusion: [
                    "Η δια βίου μάθηση έχει γίνει απαραίτητη για την προσωπική και επαγγελματική επιτυχία",
                    "Το εκπαιδευτικό σύστημα πρέπει να προσαρμοστεί ώστε να υποστηρίζει τη συνεχή μάθηση",
                    "Η μάθηση είναι μια διαδικασία που διαρκεί όλη τη ζωή"
                ]
            },
            "Πώς η υπερκατανάλωση τροφίμων επηρεάζει το περιβάλλον": {
                intro: [
                    "Παρουσιάστε στοιχεία για την υπερκατανάλωση τροφίμων στη σύγχρονη κοινωνία",
                    "Αναφερθείτε στη σχέση μεταξύ παραγωγής τροφίμων και περιβαλλοντικών προβλημάτων",
                    "Μπορείτε να ξεκινήσετε με εντυπωσιακά στατιστικά για τη σπατάλη τροφίμων"
                ],
                position: [
                    "Κατανάλωση πόρων: Η παραγωγή τροφίμων απαιτεί τεράστιες ποσότητες νερού, γης και ενέργειας",
                    "Ρύπανση: Η γεωργία συμβάλλει στη ρύπανση του νερού και του αέρα",
                    "Απώλεια βιοποικιλότητας: Η έκταση γεωργικής γης οδηγεί σε απώλεια φυσικών οικοσυστημάτων"
                ],
                counter: [
                    "Οικονομική ανάπτυξη: Η αγροτική παραγωγή υποστηρίζει οικονομίες και παρέχει θέσεις εργασίας",
                    "Ασφάλεια τροφίμων: Η αύξηση της παραγωγής εξασφαλίζει τροφή για τον αυξανόμενο πληθυσμό",
                    "Τεχνολογικές λύσεις: Νέες τεχνολογίες μπορούν να μειώσουν το περιβαλλοντικό αντίκτυπο"
                ],
                conclusion: [
                    "Η βιώσιμη κατανάλωση τροφίμων είναι καθήκον όλων μας",
                    "Χρειάζεται ισορροπία μεταξύ παραγωγής τροφίμων και περιβαλλοντικής προστασίας",
                    "Η μείωση της σπατάλης τροφίμων είναι κρίσιμη για το περιβάλλον"
                ]
            },
            "Η σημασία της κριτικής σκέψης στην εποχή της παραπληροφόρησης": {
                intro: [
                    "Περιγράψτε το φαινόμενο της παραπληροφόρησης στα social media και τα μέσα",
                    "Αναφερθείτε στις επιπτώσεις της παραπληροφόρησης στη δημοκρατία και την κοινωνία",
                    "Μπορείτε να ξεκινήσετε με παραδείγματα ευρέως διαδεδομένης παραπληροφόρησης"
                ],
                position: [
                    "Προστασία από χειραγώγηση: Η κριτική σκέψη βοηθά τους πολίτες να αναγνωρίζουν προπαγάνδα και χειραγώγηση",
                    "Λήψη τεκμηριωμένων αποφάσεων: Βοηθά στην αξιολόγηση πληροφοριών για σωστή λήψη αποφάσεων",
                    "Ενδυνάμωση πολιτών: Οι πολίτες με κριτική σκέψη μπορούν να συμμετέχουν πιο ενεργά στη δημοκρατία"
                ],
                counter: [
                    "Χρονική απαίτηση: Η κριτική αξιολόγηση πληροφοριών απαιτεί χρόνο και προσπάθεια",
                    "Εξειδίκευση: Οι πολίτες μπορεί να μην έχουν τις γνώσεις για να αξιολογούν τεχνικά θέματα",
                    "Ψυχολογική άνεση: Είναι πιο εύκολο να αποδεχτεί κανείς απλές απαντήσεις παρά να αμφισβητήσει"
                ],
                conclusion: [
                    "Η κριτική σκέψη έχει γίνει απαραίτητη δεξιότητα στον 21ο αιώνα",
                    "Το εκπαιδευτικό σύστημα πρέπει να δώσει προτεραιότητα στην ανάπτυξη κριτικής σκέψης",
                    "Η κριτική σκέψη είναι το καλύτερο όπλο ενάντια στην παραπληροφόρηση"
                ]
            },
            "Είναι εφικτή μια κοινωνία χωρίς πλαστικό": {
                intro: [
                    "Παρουσιάστε το πρόβλημα της ρύπανσης από πλαστικό",
                    "Αναφερθείτε στις επιπτώσεις του πλαστικού στο περιβάλλον και την υγεία",
                    "Μπορείτε να ξεκινήσετε με εικόνες από πλαστικά σε ωκεανούς και φυσικούς χώρους"
                ],
                position: [
                    "Περιβαλλοντική προστασία: Η μείωση του πλαστικού προστατεύει τα ωκεανούς και την άγρια ζωή",
                    "Υγεία: Η μείωση του πλαστικού μειώνει την έκθεση σε επιβλαβείς χημικές ουσίες",
                    "Κυκλική οικονομία: Η μετάβαση σε εναλλακτικές υλικά προωθεί την αειφόρο ανάπτυξη"
                ],
                counter: [
                    "Πρακτικότητα: Το πλαστικό είναι φθηνό, ελαφρύ και πολυσχιδές",
                    "Υγειονομική προστασία: Το πλαστικό είναι απαραίτητο σε ιατρικές και υγειονομικές εφαρμογές",
                    "Οικονομικό κόστος: Η αντικατάσταση του πλαστικού θα ήταν πολύ δαπανηρή"
                ],
                conclusion: [
                    "Μια κοινωνία χωρίς πλαστικό μπορεί να μην είναι ρεαλιστικός στόχος, αλλά η σημαντική μείωση είναι απαραίτητη",
                    "Χρειάζεται σταδιακή μετάβαση προς εναλλακτικές λύσεις",
                    "Η μείωση, η επαναχρησιμοποίηση και η ανακύκλωση είναι οι βασικοί πυλώνες της λύσης"
                ]
            },
            "Ο ρόλος του αθλητισμού στη διαμόρφωση του χαρακτήρα": {
                intro: [
                    "Συζητήστε την ευρύτερη σημασία του αθλητισμού πέρα από τη σωματική άσκηση",
                    "Αναφερθείτε στις αξίες που προάγει ο αθλητισμός",
                    "Μπορείτε να ξεκινήσετε με προσωπικές εμπειρίες ή παραδείγματα από γνωστούς αθλητές"
                ],
                position: [
                    "Πειθαρχία: Ο αθλητισμός διδάσκει πειθαρχία και συνέπεια",
                    "Ομαδικό πνεύμα: Οι ομαδικά αθλήματα προάγουν τη συνεργασία και την αλληλεγγύη",
                    "Επιμονή: Ο αθλητισμός ενθαρρύνει την επιμονή απέναντι στις δυσκολίες"
                ],
                counter: [
                    "Πιέσεις: Ο ανταγωνισμός μπορεί να δημιουργήσει υπερβολική πίεση και άγχος",
                    "Αδικίες: Ορισμένες φορές ο αθλητισμός μπορεί να ενθαρρύνει τον ατομικισμό και την αδίκηση",
                    "Εξάρτηση: Η υπερβολική ενασχόληση με τον αθλητισμό μπορεί να οδηγήσει σε εξάρτηση"
                ],
                conclusion: [
                    "Ο αθλητισμός μπορεί να είναι ένα ισχυρό εργαλείο για τη διαμόρφωση του χαρακτήρα",
                    "Η σωστή καθοδήγηση είναι απαραίτητη για να επικρατήσουν οι θετικές αξίες",
                    "Ο αθλητισμός πρέπει να προάγει τον τίμιο ανταγωνισμό και τον σεβασμό"
                ]
            },
            "Πρέπει να διδάσκεται η οικονομική παιδεία από νωρίς στα σχολεία": {
                intro: [
                    "Παρουσιάστε τη σημασία των οικονομικών θεμάτων στην καθημερινή ζωή",
                    "Αναφερθείτε στο επίπεδο οικονομικής αγωγής στη χώρα",
                    "Μπορείτε να ξεκινήσετε με στατιστικά για το οικονομικό αλφάβητο"
                ],
                position: [
                    "Προστασία από απάτες: Η οικονομική παιδεία βοηθά τους πολίτες να αναγνωρίζουν οικονομικές απάτες",
                    "Οικονομική ευημερία: Βοηθά στη λήψη σωστών οικονομικών αποφάσεων για μακροπρόθεσμη ευημερία",
                    "Κοινωνική ισότητα: Η οικονομική εκπαίδευση μπορεί να μειώσει τις οικονομικές ανισότητες"
                ],
                counter: [
                    "Περιορισμένος χρόνος: Το σχολικό πρόγραμμα είναι ήδη υπερφορτωμένο",
                    "Οικογενειακό ρόλο: Ορισμένοι πιστεύουν ότι η οικονομική εκπαίδευση είναι αρμοδιότητα της οικογένειας",
                    "Πρακτική εμπειρία: Η πραγματική οικονομική εκπαίδευση έρχεται με την πρακτική εμπειρία"
                ],
                conclusion: [
                    "Η οικονομική παιδεία είναι απαραίτητη για την προετοιμασία των νέων για την ενήλικη ζωή",
                    "Πρέπει να ενσωματωθεί στο σχολικό πρόγραμμα με πρακτικό και προσβάσιμο τρόπο",
                    "Η οικονομική παιδεία είναι επένδυση στο μέλλον των νέων"
                ]
            },
            "Η παγκοσμιοποίηση: ευκαιρία ή απειλή για τις τοπικές κουλτούρες": {
                intro: [
                    "Ορίστε την παγκοσμιοποίηση και τις διαστάσεις της",
                    "Αναφερθείτε στην επίδραση της παγκοσμιοποίησης στον πολιτισμό",
                    "Μπορείτε να ξεκινήσετε με παραδείγματα πολιτιστικής διασποράς ή ομογενοποίησης"
                ],
                position: [
                    "Πολιτιστική ευημερία: Η παγκοσμιοποίηση επιτρέπει την ανταλλαγή πολιτισμών και την εμπλουτισμό",
                    "Οικονομικές ευκαιρίες: Η διεθνής προβολή μπορεί να υποστηρίξει τοπικούς πολιτισμούς και βιοτεχνίες",
                    "Πρόσβαση στη γνώση: Η παγκοσμιοποίηση διευκολύνει την πρόσβαση σε πολιτιστικά αγαθά από όλο τον κόσμο"
                ],
                counter: [
                    "Πολιτιστική ομογενοποίηση: Οι τοπικοί πολιτισμοί κινδυνεύουν από την κυριαρχία των μεγάλων πολιτισμών",
                    "Εμπορευματοποίηση: Ο πολιτισμός γίνεται εμπόρευμα και χάνει την αυθεντικότητά του",
                    "Απώλεια ταυτότητας: Οι τοπικές παραδόσεις και γλώσσες κινδυνεύουν με εξαφάνιση"
                ],
                conclusion: [
                    "Η παγκοσμιοποίηση προσφέρει τόσο ευκαιρίες όσο και κινδύνους για τους τοπικούς πολιτισμούς",
                    "Το κλειδί είναι η ισορροπία μεταξύ παγκόσμιας ενσωμάτωσης και πολιτιστικής διατήρησης",
                    "Οι τοπικοί πολιτισμοί μπορούν να προσαρμοστούν χωρίς να χάσουν την ταυτότητά τους"
                ]
            },
            "Η βία στα γήπεδα: αίτια και τρόποι αντιμετώπισης": {
                intro: [
                    "Παρουσιάστε το φαινόμενο της βίας στα γήπεδα με πρόσφατα παραδείγματα",
                    "Αναφερθείτε στις επιπτώσεις της βίας στον αθλητισμό και την κοινωνία",
                    "Μπορείτε να ξεκινήσετε με στατιστικά για επεισόδια βίας σε αθλητικές εκδηλώσεις"
                ],
                position: [
                    "Κοινωνικές αιτίες: Η βία στα γήπεδα συχνά αντανακλά ευρύτερα κοινωνικά προβλήματα",
                    "Ομαδική ψυχολογία: Η ανωνυμία στο πλήθος μπορεί να οδηγήσει σε αποπροσωποποίηση και βίαιη συμπεριφορά",
                    "Εμπορικοποίηση: Η υπερβολική εμπορικοποίηση του αθλητισμού μπορεί να εντείνει τον ανταγωνισμό και τη βία"
                ],
                counter: [
                    "Ατομική ευθύνη: Η βία είναι πρωτίστως θέμα ατομικής ευθύνης και επιλογής",
                    "Παράγοντας διασκέδασης: Ορισμένοι υποστηρίζουν ότι η ένταση είναι μέρος του αθλητισμού",
                    "Υπερβολική αντίδραση: Οι μέσα ενημέρωσης μεγενθύνουν μεμονωμένα περιστατικά"
                ],
                conclusion: [
                    "Η καταπολέμηση της βίας στα γήπεδα απαιτεί ολιστική προσέγγιση",
                    "Χρειάζεται συνεργασία μεταξύ αθλητικών φορέων, αρχών και κοινωνίας",
                    "Η εκπαίδευση και η προπαγάνδα για τον τίμιο αθλητισμό είναι θεμελιώδης"
                ]
            }
        };

        // --- UTILITY FUNCTIONS ---
        function setTodayDate() {
            const dateField = document.getElementById('currentDate');
            if (!dateField) return;
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            dateField.value = `${year}-${month}-${day}`;
        }

        function showModal(message) {
            let modal = document.getElementById('feedback-modal');
            if (modal.classList.contains('hidden')) {
                modal.innerHTML = `
                    <div class="bg-white rounded-lg shadow-xl p-6 max-w-sm w-full">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Ειδοποίηση</h3>
                        <p id="modal-message" class="text-sm text-gray-600 mb-6">${message}</p>
                        <button id="modal-close" class="w-full bg-red-700 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-800 transition-colors">
                            OK
                        </button>
                    </div>
                `;
                modal.querySelector('#modal-close').addEventListener('click', () => {
                    modal.classList.add('hidden');
                });
                modal.classList.remove('hidden');
            }
        }

        function showSuggestions(section) {
            const topic = document.getElementById('studentTopic').value;
            if (!topic) {
                showModal("Παρακαλώ, επιλέξτε πρώτα ένα θέμα από τη λίστα για να δείτε τις προτάσεις (οι προτάσεις συνδέονται με τα έτοιμα θέματα).");
                return;
            }

            const modal = document.getElementById('suggestions-modal');
            const title = document.getElementById('suggestions-title');
            const content = document.getElementById('suggestions-content');

            // Set title
            title.textContent = `Προτάσεις για: ${topic}`;

            // Get suggestions for this topic and section
            let suggestions = [];
            if (topicSuggestions[topic] && topicSuggestions[topic][section]) {
                suggestions = topicSuggestions[topic][section];
            } else {
                suggestions = [
                    "Για αυτό το θέμα, σκεφτείτε να αναπτύξετε επιχειρήματα που αφορούν τις κοινωνικές, οικονομικές και ηθικές πτυχές.",
                    "Σκεφτείτε πώς το θέμα αυτό επηρεάζει τη ζωή των νέων και το μέλλον τους.",
                    "Μπορείτε να ψάξετε για πρόσφατα γεγονότα ή στατιστικά στοιχεία που σχετίζονται με το θέμα."
                ];
            }

            // Build suggestions content
            let html = `<div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                <h4 class="font-bold text-blue-800 mb-2">Προτάσεις για ${getSectionName(section)}:</h4>
                <ul class="list-disc list-inside space-y-2 text-blue-700">`;
            
            suggestions.forEach(suggestion => {
                html += `<li class="text-justify">${suggestion}</li>`;
            });
            
            html += `</ul></div>`;

            content.innerHTML = html;
            modal.classList.remove('hidden');
        }

        function getSectionName(section) {
            const sectionNames = {
                'intro': 'την Εισαγωγή',
                'position': 'τα Επιχειρήματα Θέσης',
                'counter': 'τον Αντίλογο',
                'conclusion': 'τον Επίλογο'
            };
            return sectionNames[section] || 'αυτή την ενότητα';
        }

        // --- ACCORDION LOGIC FOR MAIN ESSAY BUILDER ---
        function toggleMainAccordion(event) {
            const header = event.currentTarget;
            const targetId = header.getAttribute('data-target');
            const content = document.getElementById(targetId);
            const icon = header.querySelector('.rotate-icon');

            content.classList.toggle('active');
            icon.classList.toggle('rotated');
        }

        function updateGuidanceText() {
            const level = document.getElementById('essayLevel').value;
            const levelKey = (level === 'lyceum') ? 'lyc' : 'gym';
            
            const data = guideContent.map(s => s.content[levelKey]);
            
            document.getElementById('introParagraphGuidance').innerHTML = data[0]; 
            document.getElementById('positionParagraphGuidance').innerHTML = data[1];
            document.getElementById('counterParagraphGuidance').innerHTML = data[2];
            document.getElementById('conclusionParagraphGuidance').innerHTML = data[3];
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            const levelSelect = document.getElementById('essayLevel');
            const mainHeaders = document.querySelectorAll('#accordion-container .accordion-header');
            const helpButtons = document.querySelectorAll('.help-btn');
            const closeSuggestionsBtn = document.getElementById('modal-close-suggestions');
            const suggestionsModal = document.getElementById('suggestions-modal');
            
            // Initialization
            setTodayDate();
            updateGuidanceText();
            levelSelect.addEventListener('change', updateGuidanceText);

            // Attach listeners to main accordion headers
            mainHeaders.forEach(header => {
                header.addEventListener('click', toggleMainAccordion);
            });

            // Help buttons
            helpButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent accordion toggle
                    const section = button.getAttribute('data-section');
                    showSuggestions(section);
                });
            });

            // Close suggestions modal
            closeSuggestionsBtn.addEventListener('click', () => {
                suggestionsModal.classList.add('hidden');
            });

            // Paragraph management
            const positionContainer = document.getElementById('position-paragraphs-container');
            const counterContainer = document.getElementById('counter-paragraphs-container');
            
            let positionParagraphCount = 1;
            let counterParagraphCount = 1;

            document.getElementById('addPositionParagraph').addEventListener('click', () => {
                const count = ++positionParagraphCount;
                const newGroup = document.createElement('div');
                newGroup.className = `position-paragraph-group`;
                newGroup.innerHTML = `
                    <label class="block text-md font-semibold text-gray-700 mb-1">Παράγραφος ${count} (Θέση/Επιχείρημα)</label>
                    <textarea class="position-paragraph w-full p-3 border border-gray-300 rounded-lg shadow-sm" rows="5" placeholder="Θεματική πρόταση: Επόμενο Επιχείρημα. Ανάπτυξη: Νέα τεκμηρίωση."></textarea>
                `;
                positionContainer.appendChild(newGroup);
            });

            document.getElementById('addCounterParagraph').addEventListener('click', () => {
                const count = ++counterParagraphCount;
                const newGroup = document.createElement('div');
                newGroup.className = `counter-paragraph-group`;
                newGroup.innerHTML = `
                    <label class="block text-md font-semibold text-gray-700 mb-1">Παράγραφος ${count} (Αντίλογος/Ανασκευή)</label>
                    <textarea class="counter-paragraph w-full p-3 border border-gray-300 rounded-lg shadow-sm" rows="5" placeholder="Νέα παρουσίαση αντίλογου και ανασκευή του."></textarea>
                `;
                counterContainer.appendChild(newGroup);
            });

            // Essay assembly
            document.getElementById('assembleEssayButton').addEventListener('click', () => {
                const selectedTopic = document.getElementById('studentTopic').value;
                const customTopic = document.getElementById('customTopic').value.trim();

                // Επιλογή τίτλου ΜΟΝΟ για προεπισκόπηση (δεν εκτυπώνεται)
                let topicText = '';
                if (customTopic) {
                    topicText = customTopic;
                } else if (selectedTopic) {
                    topicText = selectedTopic;
                }

                const intro = document.getElementById('introParagraph').value.trim();
                const conclusion = document.getElementById('conclusionParagraph').value.trim();
                
                if (!intro || !conclusion) {
                    showModal("Η Εισαγωγή και ο Επίλογος είναι υποχρεωτικά μέρη του δοκιμίου.");
                    return;
                }

                const positionParagraphs = Array.from(document.querySelectorAll('.position-paragraph'))
                    .map(el => el.value.trim())
                    .filter(text => text.length > 0);
                const counterParagraphs = Array.from(document.querySelectorAll('.counter-paragraph'))
                    .map(el => el.value.trim())
                    .filter(text => text.length > 0);

                if (positionParagraphs.length === 0) {
                    showModal("Το Κύριο Μέρος πρέπει να περιέχει τουλάχιστον μία παράγραφο με επιχειρήματα (Θέση).");
                    return;
                }

                const allParagraphs = [intro, ...positionParagraphs, ...counterParagraphs, conclusion];
                const fullEssay = allParagraphs.filter(text => text.length > 0).join('\n\n');

                const topicHeading = document.getElementById('essay-topic-print');
                if (topicText) {
                    topicHeading.textContent = 'Θέμα: ' + topicText;
                    topicHeading.classList.remove('hidden');
                } else {
                    topicHeading.textContent = '';
                    topicHeading.classList.add('hidden');
                }
                
                document.getElementById('final-essay-text').textContent = fullEssay;
                document.getElementById('result-container').classList.remove('hidden');
                document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
            });

            // Copy functionality
            document.getElementById('copyButton').addEventListener('click', () => {
                const topicText = document.getElementById('essay-topic-print').textContent;
                const essayText = document.getElementById('final-essay-text').textContent;
                if (!essayText) { 
                    showModal("Δεν υπάρχει κείμενο για αντιγραφή."); 
                    return; 
                }
                const textToCopy = (topicText ? topicText + '\n\n' : '') + essayText;

                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(textToCopy)
                        .then(() => showModal("Το δοκίμιό σας αντιγράφηκε στο πρόχειρο!"))
                        .catch(() => showModal("Συγγνώμη, η αντιγραφή απέτυχε. Παρακαλώ, κάντε το χειροκίνητα."));
                } else {
                    const tempTextArea = document.createElement('textarea');
                    tempTextArea.value = textToCopy;
                    document.body.appendChild(tempTextArea);
                    tempTextArea.select();
                    try {
                        document.execCommand('copy');
                        showModal("Το δοκίμιό σας αντιγράφηκε στο πρόχειρο!");
                    } catch (err) {
                        showModal("Συγγνώμη, η αντιγραφή απέτυχε. Παρακαλώ, κάντε το χειροκίνητα.");
                    }
                    document.body.removeChild(tempTextArea);
                }
            });

            // Print functionality
            document.getElementById('printButton').addEventListener('click', () => {
                window.print();
            });

            // Reset functionality
            document.getElementById('resetButton').addEventListener('click', () => {
                document.getElementById('introParagraph').value = '';
                document.getElementById('conclusionParagraph').value = '';
                document.getElementById('studentName').value = '';
                document.getElementById('className').value = '';
                document.getElementById('customTopic').value = '';
                setTodayDate();

                positionContainer.innerHTML = document.querySelector('.position-paragraph-group').outerHTML;
                counterContainer.innerHTML = document.querySelector('.counter-paragraph-group').outerHTML;
                positionParagraphCount = 1;
                counterParagraphCount = 1;
                
                document.getElementById('studentTopic').selectedIndex = 0;
                document.getElementById('essayLevel').selectedIndex = 0;
                document.getElementById('final-essay-text').textContent = '';
                const topicHeading = document.getElementById('essay-topic-print');
                topicHeading.textContent = '';
                topicHeading.classList.add('hidden');
                document.getElementById('result-container').classList.add('hidden');
                updateGuidanceText();
            });
        });
    </script>
</body>
</html>
